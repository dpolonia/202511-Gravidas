<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gravidas AI Cost Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .timestamp {
            color: #999;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin: 10px 0;
        }

        .stat-label {
            color: #666;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-sublabel {
            color: #999;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .chart-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        footer {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            color: #666;
        }

        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ’° Gravidas AI Cost Dashboard</h1>
            <div class="subtitle">Real-time cost monitoring for synthetic interview generation</div>
            <div class="timestamp">Last Updated: 2025-11-17T14:07:05.138250</div>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Total Cost</div>
                <div class="stat-value">â‚¬0.0047</div>
                <div class="stat-sublabel">$0.0051 USD</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Total Tokens</div>
                <div class="stat-value">0</div>
                <div class="stat-sublabel">0 in / 0 out</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">Models Used</div>
                <div class="stat-value">3</div>
                <div class="stat-sublabel">3 providers</div>
            </div>

            <div class="stat-card">
                <div class="stat-label">API Calls</div>
                <div class="stat-value">1,770</div>
                <div class="stat-sublabel">Total requests</div>
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Cost by Model (EUR)</div>
                <div class="chart-wrapper">
                    <canvas id="modelCostChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Cost by Provider (EUR)</div>
                <div class="chart-wrapper">
                    <canvas id="providerCostChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Token Usage by Model</div>
                <div class="chart-wrapper">
                    <canvas id="tokenChart"></canvas>
                </div>
            </div>

            <div class="chart-container">
                <div class="chart-title">Cost per 1M Tokens (EUR)</div>
                <div class="chart-wrapper">
                    <canvas id="efficiencyChart"></canvas>
                </div>
            </div>

            <div class="chart-container full-width">
                <div class="chart-title">Cumulative Cost Over Time (Last 100 API Calls)</div>
                <div class="chart-wrapper" style="height: 400px;">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
        </div>

        <footer>
            <p>Generated by Gravidas Cost Dashboard Generator</p>
            <p>Synthetic Gravidas Research Project - v1.2.0</p>
        </footer>
    </div>

    <script>
        // Chart.js configuration
        Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';

        const colors = [
            'rgba(102, 126, 234, 0.8)',
            'rgba(118, 75, 162, 0.8)',
            'rgba(237, 100, 166, 0.8)',
            'rgba(255, 154, 158, 0.8)',
            'rgba(250, 208, 196, 0.8)',
            'rgba(165, 177, 194, 0.8)'
        ];

        // Model Cost Chart (Pie)
        new Chart(document.getElementById('modelCostChart'), {
            type: 'pie',
            data: {
                labels: ["grok-2-latest", "claude-haiku-4-5", "gpt-4o-mini"],
                datasets: [{
                    data: [0.0005376875600000002, 0.00061870092, 0.003572407840000005],
                    backgroundColor: colors
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': â‚¬' + context.parsed.toFixed(4);
                            }
                        }
                    }
                }
            }
        });

        // Provider Cost Chart (Doughnut)
        new Chart(document.getElementById('providerCostChart'), {
            type: 'doughnut',
            data: {
                labels: ["xAI", "Anthropic", "OpenAI"],
                datasets: [{
                    data: [0.0005376875600000002, 0.00061870092, 0.003572407840000005],
                    backgroundColor: colors
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': â‚¬' + context.parsed.toFixed(4);
                            }
                        }
                    }
                }
            }
        });

        // Token Usage Chart (Bar)
        new Chart(document.getElementById('tokenChart'), {
            type: 'bar',
            data: {
                labels: ["grok-2-latest", "claude-haiku-4-5", "gpt-4o-mini"],
                datasets: [
                    {
                        label: 'Input Tokens',
                        data: [0, 0, 0],
                        backgroundColor: 'rgba(102, 126, 234, 0.8)'
                    },
                    {
                        label: 'Output Tokens',
                        data: [0, 0, 0],
                        backgroundColor: 'rgba(118, 75, 162, 0.8)'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true
                    },
                    y: {
                        stacked: true,
                        ticks: {
                            callback: function(value) {
                                return (value / 1000).toFixed(0) + 'k';
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                }
            }
        });

        // Efficiency Chart (Cost per 1M tokens)
        const efficiencyData = ["grok-2-latest", "claude-haiku-4-5", "gpt-4o-mini"].map((model, i) => {
            const tokens = [0, 0, 0][i] + [0, 0, 0][i];
            const cost = [0.0005376875600000002, 0.00061870092, 0.003572407840000005][i];
            return tokens > 0 ? (cost / tokens * 1000000) : 0;
        });

        new Chart(document.getElementById('efficiencyChart'), {
            type: 'bar',
            data: {
                labels: ["grok-2-latest", "claude-haiku-4-5", "gpt-4o-mini"],
                datasets: [{
                    label: 'EUR per 1M Tokens',
                    data: efficiencyData,
                    backgroundColor: 'rgba(237, 100, 166, 0.8)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'â‚¬' + context.parsed.y.toFixed(2) + ' per 1M tokens';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Timeline Chart (Line)
        const timelineDatasets = [];
        const modelColors = {};
        ["grok-2-latest", "claude-haiku-4-5", "gpt-4o-mini"].forEach((model, i) => {
            modelColors[model] = colors[i % colors.length];
        });

        // Build datasets for each model
        const modelData = {"gpt-4o-mini": [0.0033377756400000055, 0.0033410784400000055, 0.003344646200000006, 0.0033486215200000057, 0.0033489978000000053, 0.0033496546800000056, 0.0033505535200000058, 0.003351778960000006, 0.0033532702800000056, 0.003355120400000006, 0.0033572327200000057, 0.003359501440000006, 0.0033622862800000057, 0.003365408760000006, 0.003368821040000006, 0.003372611440000006, 0.003376856320000006, 0.003381393760000006, 0.003386266080000006, 0.003391700520000006, 0.003392052880000006, 0.003392662840000006, 0.0033933546800000063, 0.0033941946400000062, 0.003395255400000006, 0.003396486360000006, 0.003397884760000006, 0.003399427600000006, 0.0034012676000000058, 0.0034033054000000055, 0.0034055732000000056, 0.0034081151600000056, 0.0034108954000000055, 0.003413902880000006, 0.0034171698000000058, 0.003420814840000006, 0.003421168120000006, 0.003421885720000006, 0.003422745000000006, 0.0034239373200000063, 0.003425366080000006, 0.0034271600800000065, 0.0034291758000000064, 0.0034313240000000064, 0.0034338374400000064, 0.0034366581600000063, 0.0034397631600000065, 0.0034432527200000066, 0.0034469925200000064, 0.0034510690400000065, 0.0034555733600000068, 0.0034605413600000065, 0.0034609185600000068, 0.003461536800000007, 0.003462313280000007, 0.0034632857200000066, 0.0034644532000000067, 0.0034658506800000067, 0.0034673447600000067, 0.003469040320000007, 0.003470936440000007, 0.0034739301200000065, 0.0034772936400000063, 0.0034805486000000067, 0.0034846021200000067, 0.0034884762400000068, 0.0034932648400000064, 0.0034979375200000066, 0.0034982843600000067, 0.003498941240000007, 0.0034997609600000068, 0.0035008520800000067, 0.0035021437600000066, 0.0035037408800000064, 0.0035055164800000065, 0.0035074420400000063, 0.003509798160000006, 0.003512404520000006, 0.0035153163200000058, 0.0035185252800000056, 0.0035220801600000058, 0.003525983720000006, 0.0035301614400000056, 0.003534862640000006, 0.003535244440000006, 0.003535914200000006, 0.003536716440000006, 0.003537746840000006, 0.0035390274800000056, 0.0035407028000000056, 0.0035425639600000056, 0.003544530000000006, 0.0035468870400000053, 0.003549547680000005, 0.0035525266400000055, 0.0035558552000000054, 0.0035595112800000054, 0.0035634755600000055, 0.0035677305600000054, 0.003572407840000005]};
        Object.keys(modelData).forEach((model, i) => {
            timelineDatasets.push({
                label: model,
                data: modelData[model],
                borderColor: modelColors[model] || colors[i % colors.length],
                backgroundColor: 'transparent',
                tension: 0.1,
                borderWidth: 2
            });
        });

        new Chart(document.getElementById('timelineChart'), {
            type: 'line',
            data: {
                labels: ["3.626", "1.233", "9.666", "9.417", "1.271", "4.753", "9.929", "8.534", "6.430", "5.713", "3.283", "0.130", "2.517", "0.373", "7.465", "5.603", "5.260", "4.165", "4.371", "4.859", "6.357", "2.670", "6.185", "9.938", "5.938", "0.968", "7.877", "2.891", "9.534", "4.122", "3.879", "0.354", "6.681", "1.695", "8.761", "9.964", "1.490", "7.694", "2.001", "8.541", "4.138", "6.812", "5.747", "1.420", "0.127", "8.325", "7.663", "5.663", "2.528", "9.833", "9.087", "0.891", "2.747", "5.728", "9.452", "4.426", "9.448", "5.947", "1.253", "6.004", "4.888", "2.556", "4.650", "9.538", "1.892", "6.250", "0.103", "6.302", "7.822", "1.977", "6.132", "1.941", "7.822", "5.384", "1.260", "6.663", "5.359", "2.568", "0.609", "8.454", "5.566", "3.890", "0.499", "2.133", "4.565", "9.438", "4.189", "9.732", "7.347", "8.493", "6.882", "2.490", "3.115", "3.249", "4.082", "2.746", "4.343", "3.127", "3.459", "5.138"],
                datasets: timelineDatasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': â‚¬' + context.parsed.y.toFixed(4);
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return 'â‚¬' + value.toFixed(4);
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>
